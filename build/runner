#!/bin/bash
declare -x db="q122303_qp"
declare -x dbuser="q122303admin"
declare -x sflogin="butter100fly,quickplay@shell.sourceforge.net"
declare -x workingDir="/home/project-web/quickplay"
# rsync interprets ":" as separator between host and port (i. e. host:port)
#  so we cannot use %T or %H:%M:%S here, so we use %H-%M-%S
declare -x date=`date "+%FT%H-%M-%S"` 
declare -x sqlFolder="../../database"
declare -x sqlArchiveFolder="$sqlFolder/archive"
declare -x sqlArchiveFile="$sqlArchiveFolder""$db"-"$date"
declare -x sqlLiveFile="$sqlFolder/$db.sql"
declare -x SSHEnvVars="db="$db"; dbuser="$dbuser"; workingDir="$workingDir";cd "$workingDir";"


DIR=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )
cd "${DIR}"

warn="***SHUT MAMP WHEN YOU'RE DONE***"

while true; do
	echo "What shall we do now?"
	echo "	1. Edit the website locally"
	echo "	2. Export the SQL"
	echo "	3. Export SQL and take the website live"
	echo "	4. Enter Local command line"
	echo "	5. Enter SSH Remote command line"
	echo "	QUIT. Quit and blank secrets so its safe to commit"
	
	
	read -p "-> " response
	case $response in
		1) echo "Local Mode"; ./switcher --local;;
		2) echo "Exporting the SQL"; ./switcher --exportSQL;;
		3) echo "Exporting the SQL and Going live"; ./switcher --live;;
		4) echo "Local SQL Command line"; ./switcher --localCMD; ($SHELL); exit;;
		5) echo "SSH Command Line"; ./informed_ssh_prompt;;
		QUIT) echo "exiting..."; ./switcher --blankem; break;; 
		quit) echo "exiting..."; ./switcher --blankem; break;; 
		*) echo "Try again";;
	esac
done
$SHELL
