#!/bin/bash

# first test to see if I remembered to unblank the secrets
if ! diff "$secret_file_to_diff" "$secret_file_to_test"  >/dev/null ; then
  echo "Found some secrets...starting"
  if grep -Fxq "localhost" "$secret_file_to_test"; then
    echo "Uhuh - you left the local creds in..."
    exit
  fi
else
  echo "I think you forgot to unblank the secrets....exiting"
  exit
fi

#TODO: first we must make sure theres no differences introduced with the files on the server

#sync the local site to the server - remember to exclude the git folder, also exclude this folder
rsync -avz --delete --exclude='build'  --exclude '.git' ../ $sflogin:/home/project-web/quickplay/htdocs/

echo "mirrored local folder to the server - done"
read -n1 -r -p "Press any key to continue..."


